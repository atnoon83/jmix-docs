= FullCalendar component

`FullCalendar` is a UI component designed to display date ranges and calendar events.
It has a lot of features for managing calendar events and various display modes (day, week, etc).

[cols="1h,6",grid=none]
|===

|XML Element |`calendar`

|XML Schema | `http://jmix.io/schema/fullcalendar/ui`

|XML namespace | `calendar`

|Java Class |`FullCalendar`

|Attributes

|xref:flow-ui:vc/common-attributes.adoc#id[id] -
<<allDayMaintainDurationEnabled, allDayMaintainDurationEnabled>> -
<<allDayText, allDayText>> -
<<closeHint, closeHint>> -
xref:flow-ui:vc/common-attributes.adoc#alignSelf[alignSelf] -
xref:flow-ui:vc/common-attributes.adoc#classNames[classNames] -
xref:flow-ui:vc/common-attributes.adoc#colspan[colspan] -
xref:flow-ui:vc/common-attributes.adoc#css[css] -
<<dateAlignment, dateAlignment>> -
<<dayHeadersVisible, dayHeadersVisible>> -
<<dayMaxEventRows, dayMaxEventRows>> -
<<dayMaxEvents, dayMaxEvents>> -
<<dayOfYear, dayOfYear>> -
<<defaultAllDay, defaultAllDay>> -
<<defaultAllDayEventDuration, defaultAllDayEventDuration>> -
<<defaultBusinessHoursEnabled, defaultBusinessHoursEnabled>> -
<<defaultDayHeaderFormat, defaultDayHeaderFormat>> -
<<defaultDayMaxEventRowsEnabled, defaultDayMaxEventRowsEnabled>> -
<<defaultDayMaxEventsEnabled, defaultDayMaxEventsEnabled>> -
<<defaultDayPopoverFormat, defaultDayPopoverFormat>> -
<<defaultEventTimeFormat, defaultEventTimeFormat>> -
<<defaultSlotLabelFormat, defaultSlotLabelFormat>> -
<<defaultTimedEventDuration, defaultTimedEventDuration>> -
<<defaultWeekNumberFormat, defaultWeekNumberFormat>> -
<<displayEventTime, displayEventTime>> -
<<dragRevertDuration, dragRevertDuration>> -
<<dragScroll, dragScroll>> -
<<eventBackgroundColor, eventBackgroundColor>> -
<<eventBorderColor, eventBorderColor>> -
<<eventConstraintBusinessHoursEnabled, eventConstraintBusinessHoursEnabled>> -
<<eventConstraintGroupId, eventConstraintGroupId>> -
<<eventDisplay, eventDisplay>> -
<<eventDragMinDistance, eventDragMinDistance>> -
<<eventDurationEditable, eventDurationEditable>> -
<<eventHint, eventHint>> -
<<eventInteractive, eventInteractive>> -
<<eventLongPressDelay, eventLongPressDelay>> -
<<eventMaxStack, eventMaxStack>> -
<<eventOrder, eventOrder>> -
<<eventOrderStrict, eventOrderStrict>> -
<<eventOverlap, eventOverlap>> -
<<eventResizableFromStart, eventResizableFromStart>> -
<<eventStartEditable, eventStartEditable>> -
<<eventTextColor, eventTextColor>> -
<<expandRows, expandRows>> -
<<firstDayOfWeek, firstDayOfWeek>> -
<<forceEventDuration, forceEventDuration>> -
xref:flow-ui:vc/common-attributes.adoc#height[height] -
<<initialDate, initialDate>> -
<<initialDisplayMode, initialDisplayMode>> -
xref:flow-ui:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:flow-ui:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:flow-ui:vc/common-attributes.adoc#minHeight[minHeight] -
xref:flow-ui:vc/common-attributes.adoc#minWidth[minWidth] -
<<moreLinkClassNames, moreLinkClassNames>> -
<<moreLinkDisplayMode, moreLinkDisplayMode>> -
<<moreLinkHint, moreLinkHint>> -
<<moreLinkText, moreLinkText>> -
<<navLinkHint, navLinkHint>> -
<<navigationLinksEnabled, navigationLinksEnabled>> -
<<nextDayThreshold, nextDayThreshold>> -
<<noEventsText, noEventsText>> -
<<nowIndicatorVisible, nowIndicatorVisible>> -
<<progressiveEventRendering, progressiveEventRendering>> -
<<scrollTime, scrollTime>> -
<<scrollTimeReset, scrollTimeReset>> -
<<selectConstraintBusinessHoursEnabled, selectConstraintBusinessHoursEnabled>> -
<<selectConstraintGroupId, selectConstraintGroupId>> -
<<selectLongPressDelay, selectLongPressDelay>> -
<<selectMinDistance, selectMinDistance>> -
<<selectMirror, selectMirror>> -
<<selectOverlap, selectOverlap>> -
<<selectionEnabled, selectionEnabled>> -
<<slotDuration, slotDuration>> -
<<slotLabelInterval, slotLabelInterval>> -
<<slotMaxTime, slotMaxTime>> -
<<slotMinTime, slotMinTime>> -
<<snapDuration, snapDuration>> -
<<timeHint, timeHint>> -
<<unselectAuto, unselectAuto>> -
<<unselectCancelSelector, unselectCancelSelector>> -
xref:flow-ui:vc/common-attributes.adoc#visible[visible] -
<<weekNumbersVisible, weekNumbersVisible>> -
<<weekTextLong, weekTextLong>> -
<<weekendsVisible, weekendsVisible>> -
xref:flow-ui:vc/common-attributes.adoc#width[width] -
<<windowResizeDelay, windowResizeDelay>>

|Elements
|<<dataProviders, dataProviders>>

|===

[[basic]]
== Basic

`FullCalendar` component is available in the *Add Component* palette of the Studio xref:studio:view-designer.adoc[View Designer] as soon as you install add-on in your project.

To create the component, use `calendar` XML element.
If you need to show events, bind `containerEventProvider` to xref:flow-ui:data/data-containers.adoc[data container].

The following example demonstrates how a basic `calendar` is created:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-basic.xml[tags=sample-basic1]
----

[[data-model]]
== Data Model

[[calendar-event]]
=== Calendar Event

The base interface for events in the calendar component is `CalendarEvent`.
It has the following properties:

[cols="1h,6a",grid=none]
|===
| [[id]]id
| A unique ID of calendar event. Is used for identification on client-side.

| [[groupId]]groupId
| The group object that is shared between other evens. Events with the same group ID will be dragged and resized together automatically.

| [[allDay]]allDay
| Determines if the event is shown in the "all-day" section of relevant display mode.
By default, component consider value all events as non-all-day.

The `null` value means not all day event.

| [[startDateTime]]startDateTime
| Defines start date-time position of event. It has the `LocalDateTime` type, and the value should correspond to system default time zone. For <<EntityCalendarEvent>>, the value will be automatically transformed from supported date-time datatype .

| [[endDateTime]]endDateTime
| Defines end date-time position of event. It has the `LocalDateTime` type, and the value should correspond to system default time zone. For <<EntityCalendarEvent>>, the value will be automatically transformed from supported date-time datatype .

This value is *exclusive*. For instance, an event with end date-tme property -
`2024-09-03` will appear to span through `2024-09-02` but before the start of `2024-09-03`.

| [[title]]title
| The text that will appear on an event.

| [[description]]description
| The text of event description.

| [[interactive]]interactive
| Specifies whether events can be navigated using the TAB key.

If this value is `null`, the calendar will manage event interactivity based on the <<eventInteractive, eventInteractive>> property.

| [[classNames]]classNames
| Specifies class names separated by space that should be attached to the rendered event.

| [[startEditable]]startEditable
| Determines whether an event can be dragged in the calendar component.

If this value is `null`, the calendar will manage event's draggable feature based on the <<eventStartEditable, eventStartEditable>> property.

| [[durationEditable]]durationEditable
| Determines whether an event can be resized in the calendar component.

If this value is `null`, the calendar will manage event's resizable feature based on the <<eventDurationEditable, eventDurationEditable>> property.

| [[display]]display
| Defines the type of event rendering.  If not specified, the `AUTO` value will be used.

| [[overlap]]overlap
| Defines whether the event can be dragged/resized over other events and prevents other events from being dragged/resized over this event.

If this value is `null`, the calendar will manage this feature based on the <<eventOverlap, eventOverlap>> property or specific JavaScript function.

| [[constraint]]constraint
| Defines a group ID of other events. This property limits dragging and resizing to a certain cells in component.

If this value is `null`, the calendar will manage event's constraint based on the <<eventConstraintGroupId, eventConstraintGroupId>> or <<eventConstraintBusinessHoursEnabled, eventConstraintBusinessHoursEnabled>> properties.

| [[backgroundColor]]backgroundColor
| Specifies the background color for event. Supported values are:

- `#f00`
- `#ff0000`
- `rgb(255,0,0)`
- Color name - 'red'

If this value is `null`, the calendar will manage event's background color based on the <<eventBackgroundColor, eventBackgroundColor>> property.

| [[borderColor]]borderColor
| Specifies the border color for event. Supported values are:

- `#f00`
- `#ff0000`
- `rgb(255,0,0)`
- Color name - 'red'

If this value is `null`, the calendar will manage event's border color based on the <<eventBorderColor, eventBorderColor>> property.

| [[textColor]]textColor
| Specifies the text color for event. Supported values are:

- `#f00`
- `#ff0000`
- `rgb(255,0,0)`
- Color name - 'red'

If this value is `null`, the calendar will manage event's text color based on the <<eventTextColor, eventTextColor>> property.

| [[additionalProperties]]additionalProperties
| Defines additional properties and their values that will be available in various JavaScript functions that takes an event as parameter.

| [[recurringDaysOfWeek]]recurringDaysOfWeek
| Specifies the days of the week this event repeats. If omitted, the event is assumed to repeat every day.

| [[recurringStartDate]]recurringStartDate
| Specifies the date when the recurrences of this event start. If not specified, the recurrences will extend infinitely into the past.

| [[recurringEndDate]]recurringEndDate
| Specifies the date when the recurrences of this event end. If not specified, the recurrences will extend infinitely into the future.

Note that this value is *exclusive*. For all-day recurring events, set the end date to the day after your desired last recurrence.

| [[recurringStartTime]]recurringStartTime
| Specifies the start time of a recurring event. If this is not defined, the event is considered an all-day event.

Note that the calendar does not apply time zone conversion for this property. If the OffsetTime datatype is used in the entity, it will be transformed to the system's default time zone.

| [[recurringEndTime]]recurringEndTime
| Specifies the end time of a recurring event. If this is not defined, the event will appear to have the default duration as configured by the <<defaultTimedEventDuration, defaultTimedEventDuration>> property.

|===

[[entity-calendar-event]]
=== EntityCalendarEvent

The implementation of <<calendar-event, CalendarEvent>> that works with JPA or DTO entities.
When <<container-data-provider>> links with xref:flow-ui:data/collection-container.adoc[collection container] it automatically wraps loaded entities to `EntityCalendarEvent` and pass it to the component.
For instance, in this case all calendar events are `EntityCalendarEvent`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-entity-calendar-event.xml[tags=sample-entity-calendar-event1]
----

And you can safely cast to `EntityCalendarEvent`:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/SampleEntityCalendarEvent.java[tags=sample-entity-calendar-event2]
----

[[simple-calendar-event]]
=== SimpleCalendarEvent

The simple POJO class that implements <<calendar-event, CalendarEvent>> interface.
You can use this event class as an alternative to creating DTOs or for prototyping purposes.
It also includes a builder class to facilitate the convenient creation of event instances.

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/SampleSimpleCalendarEventView.java[tags=sample-simple-calendar-event1]
----

[[recurring-events]]
=== Recurring events

Recurring events are events that occur multiple times at regular intervals, following a predefined schedule.
In `FullCalendar` you can configure the schedule by the following properties of `CalendarEvent`:

- <<recurringDaysOfWeek, recurringDaysOfWeek>>
- <<recurringStartDate, recurringStartDate>>
- <<recurringEndDate, recurringEndDate>>
- <<recurringStartTime, recurringStartTime>>
- <<recurringEndTime, recurringEndTime>>

If any of these recurrence properties are specified, `FullCalendar` assumes the event is recurring and ignores the <<startDateTime, startDateTime>> and <<endDateTime, endDateTime>> properties.

When the data provider specifies recurrence properties, the single repeating event in the container will be expanded into individual events instances with their own dates in `FullCalendar`.
However, the container will still contain the single recurring event.

You can specify recurrence properties in the data provider as shown below:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-recurring-events-view.xml[tags=sample-recurring-events1]
----

[[recurrence-event-and-group-id]]
==== Recurrence Event and Group ID Property

The `FullCalendar` expands single recurring events into individual events instances.
These events act as if they are not related.
For instance, if you specify the <<eventStartEditable, eventStartEditable>> property, you can achieve the following behavior with recurring events:

image::move-recurring-event-no-groupid.png[align="center"]

If you want all the recurring events in a definition to move together, you need to specify the <<groupId, groupId>> property of <<calendar-event, CalendarEvent>>.

image::move-recurring-event-groupid.png[align="center"]

[[days-of-week-datatype]]
==== DaysOfWeek Datatype

The <<recurringDaysOfWeek, recurringDaysOfWeek>> property defines the list of days of the week and requires a specific datatype to store it in JPA or DTO entities - `DaysOfWeek`.

The Studio provides this type when you add an attribute to a JPA or DTO entity.

image::add-recurring-days-of-week-attribute.png[align="center"]

In the UI you can edit `DaysOfWeek` using xref:flow-ui:vc/components/valuePicker.adoc[] and `DaysOfWeekEditAction`.

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/app/event/event-detail-view.xml[tags=sample-days-of-week-edit-action]
----

[[data-binding]]
== Data Binding

The calendar component uses data providers to link loaded data and visualize it.
The data item should implement the <<calendar-event, CalendarEvent>> interface in order to be shown in the component.
In case of JPA or DTO entity, there is a <<container-data-provider>> that wraps an entity to the <<EntityCalendarEvent>>.

The `FullCalendar` component allows you to add multiple data providers.
In one calendar, you can display data from different data sources and services.

[[calendar-data-provider]]
=== CalendarDataProvider

The `FullCalendar` component uses data providers to load events and display them in the UI. `CalendarDataProvider` is a base interface for all data providers that the calendar uses.
There are two base types of calendar data providers:

- Data providers that load all data at once.
- <<CallbackCalendarDataProvider>>, which loads partial data on demand.

[[container-data-provider]]
=== ContainerDataProvider

The data provider that works with xref:flow-ui:data/data-containers.adoc[].
It reflects any changes in the container (adding, removing, and changing entity) and updates the `FullCalendar` UI.

To use the container data provider in `FullCalendar` you should specify:

- `dataContainer` property: a reference to an ID of an existing container in a view.
- Entity properties mapping.
The container data provider wraps JPA or DTO entities into <<entity-calendar-event>> to adapt the entity for `FullCalendar` component.
However, the data provider does not know which properties from the JPA or DTO entity should be used for <<calendar-event>>.
Therefore, it requires you to define property mappings.

The example of the container data provider:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-container-calendar-data-provider-view.xml[tags=sample-container-calendar-data-provider1]
----

To work with the container data provider programmatically, you can use the `ContainerCalendarDataProvider` class.

[[list-calendar-data-provider]]
=== ListCalendarDataProvider

The data provider that takes data from the provided list of items.
It does not have XML definition but can be added programmatically.

Here is a basic example of a list calendar data provider:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/SampleListCalendarDataProviderView.java[tags=sample-list-calendar-data-provider1]
----

The list data provider also updates the `FullCalendar` UI when it's modified by API:

- `addItem()` - also adds an item to the UI.
- `removeItem()` - removes an item from the UI.
- `updateItem()` - updates an item in the UI.
- and other methods.

[[callback-calendar-data-provider]]
=== CallbackCalendarDataProvider

The `CallbackCalendarDataProvider` is a base interface for data providers that load data on demand.
This interface has a method called `onItemsFetch()` that will be invoked when the component needs new data.

The data is loaded when:

- The user switches to a calendar display mode that has wider date range than the previous one.
- The navigation methods of the `FullCalendar` component are invoked, such as `navigateToNext()` and other methods.
- The time zone of `FullCalendar` component is changed.

[[callback-data-provider]]
=== CallbackDataProvider

The data provider that loads data using a JPQL query and a xref:data-access:data-manager.adoc[DataManager].
Similar to <<container-data-provider>>, it requires you to specify property mappings.
Additionally, you should also specify a JPQL query that will load the data.

An example of property mappings in the `callbackDataProvider` element:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-entity-calendar-data-retriever-view.xml[tags=sample-entity-calendar-data-retriever1]
----

In order to load data using JPQL query, you should specify an `<itemsQuery>` element inside the data provider.
This element requires you to specify the fully qualified name of the entity class that will be used in the JPQL query.

The items query allows you to define a xref:data-access:fetching.adoc#fetch-plan[FetchPlan] in the `fetchPlan` attribute or within its element.

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-entity-calendar-data-retriever-view.xml[tags=sample-entity-calendar-data-retriever2]
----

In the JPQL query you can use two parameters:

- `fetchStartDate` - the left border of visible date range in the `FullCalendar`
- `fetchEndDate` - the right border of visible date range in the `FullCalendar`.

NOTE: The `fetchEndDate` value is exclusive.
For instance, if the visible date range is from `2024-09-29` to `2024-11-09` the actual value of the `fetchEndDate` will be `2024-11-10`.

The full example of using `callbackDataProvider`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/sample-entity-calendar-data-retriever-view.xml[tags=sample-entity-calendar-data-retriever10]
----

NOTE: This JPQL query assumes that thee `startDate` and `endDate` values are not `null`.
Otherwise, an additional `null` check is required.

To work programmatically with the callback data provider, use the `EntityCalendarDataRetriever` class.
It is a Spring bean with prototype scope, so initialize this class carefully using Spring.

[[callback-data-provider-and-load-delegate]]
==== CallbackDataProvider and Load Delegate

There are cases when business logic requires building complicated JPQL queries with many conditions.
Therefore, writing a query in an XML descriptor becomes inconvenient.
In such cases, you can set a load delegate for the `callbackDataProvider`.

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/SampleEntityCalendarDataRetrieverView.java[tags=sample-entity-calendar-data-retriever4]
----

TIP: `myDataProvider` is the ID of the data provider.
You can specify it using the `id` attribute in the XML definition.

NOTE: If your implementation of the load delegate returns a list of <<entity-calendar-event>>, you will need to specify property mappings in the data provider.

[[calendar-data-retriever]]
=== CalendarDataRetriever

The `CalendarDataRetriever` is a simple data provider that is similar to the `callbackDataProvider` with a load delegate; however it does not have an XML definition.This data provider can be used together with services to load data.

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/SampleEntityCalendarDataRetrieverView.java[tags=sample-entity-calendar-data-retriever5]
----

[#_calendar_display_modes]
== Calendar Display Modes

In the `FullCalendar`, display mode represents a specific way of displaying calendar data.It helps users visualize events over different timeframes, such as days, weeks, or months.It allows you to interact with the calendar in various formats.For example, you might want to see a detailed view of a single day or a broader overview of an entire month.

The `FullCalendar` has a various built-in display modes:

[[day-grid-modes]]
1) **Day-grid modes** - display calendar events in a grid format, similar to what you might see in traditional paper calendars.Each cell in the day-grid represents a single day.

[[dayGridDay]]
- `DAY_GRID_DAY` - focuses on a single day, providing detailed visibility into events scheduled for that day.
[[dayGridWeek]]
- `DAY_GRID_WEEK` - shows a week’s worth of days, which is useful for focusing on upcoming events.
[[dayGridMonth]]
- `DAY_GRID_MONTH` - displays an entire month at once, allowing users to see all days and their associated events.
[[dayGridYear]]
- `DAY_GRID_YEAR` - displays an entire year at once.

Use <<initialDisplayMode, initialDisplayMode>> attribute to display day-grid modes of the `FullCalendar`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/day-grid-week-mode-view.xml[tags=day-grid-week-mode1]
----

The screenshot below demonstrates a day-grid month display mode:

image::day-grid-month-mode.png[align="center"]

[[time-grid-modes]]
2) *Time-grid modes* - are time-oriented layouts for displaying events across one or more days.
These formats are particularly useful for users who need to manage their schedules with a focus on specific times throughout the day

[[timeGridDay]]
- `TIME_GRID_DAY` - displays a single day in detail, allowing users to see all events scheduled for that day along with their specific times.
[[timeGridWeek]]
- `TIME_GRID_WEEK` - shows an entire week, providing a broader view while still maintaining the time slots for each day.
This is ideal for planning and scheduling across multiple days.

Use <<initialDisplayMode, initialDisplayMode>> attribute to display time-grid modes of the `FullCalendar`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/time-grid-week-mode-view.xml[tags=time-grid-week-mode1]
----

The screenshot below demonstrates a time-grid week display mode:

image::time-grid-week-mode.png[align="center"]

[[list-modes]]
3) *List modes* - presents events in a straightforward vertical format, making it easy for users to see and manage their schedules over a specified period.

[[listDay]]
- `LIST_DAY` - shows all events for a single day.
[[listWeek]]
- `LIST_WEEK` - displays events for an entire week.
[[listMonth]]
- `LIST_MONTH` - lists events for the month.
[[listYear]]
- `LIST_YEAR` - provides an overview of events throughout the year.

Use <<initialDisplayMode, initialDisplayMode>> attribute to display list display modes of the `FullCalendar`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/list-week-mode-view.xml[tags=list-week-mode1]
----

The screenshot below demonstrates a list week display mode:

image::list-week-mode.png[align="center"]

[[multi-month-year]]
4) **Multi month year mode** - provides a comprehensive way to visualize several months at once.

[[multiMonthYear]]
- `MULTI_MONTH_YEAR` - displays a grid of months, allowing users to see 12 months.

Use <<initialDisplayMode, initialDisplayMode>> attribute to display multi month display mode of the `FullCalendar`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/multi-month-year-mode-view.xml[tags=multi-month-year-mode1]
----

The screenshot below demonstrates a multi month year display mode:

image::multi-month-year-mode.png[align="center"]

=== Display Mode Properties

Every predefined display mode has its own set of properties.
Some properties are specific to a display mode, while others are general.

For instance, you can configure `dayHeaderFormat` only for the day-grid day mode, and other modes won’t affect the format.

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/display-mode-properties-view.xml[tags=display-mode-properties1]
----

The FullCalendar also allows you to override properties in the calendar component using configured properties from the display mode.

For instance, consider that the component enables the <<weekNumbersVisible, weekNumbersVisible>> property.
However, if there is a requirement to disable this feature for the day-grid month display mode, you should use the `properties` tag inside the display mode properties

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/display-mode-properties-override-view.xml[tags=display-mode-properties-override1]
----

NOTE: In the `name` attribute, you should specify the property name as it is defined in `FullCalendar.js`.
Refer to the https://fullcalendar.io/docs#toc[FullCalendar.js documentation] to find correct property name.
Use this feature carefully;  `FullCalendar` may ignore this display mode property setup if you change the same property in the component at runtime.

[[custom-calendar-display-mode]]
=== Custom Calendar Display Mode

When predefined display modes are not suitable for the task, you can create your own display mode with a custom date range.
There are two ways of creating a custom display mode:

- Programmatically, using the `CustomCalendarDisplayMode` class.
- Using the <<custom-display-mode>> element in an XML.

Custom display modes should be based on one of four base types: day-grid, time-grid, list and multi-month.

For instance, you can define a time-oriented display mode in a declarative way using the following code:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/custom-display-mode-view.xml[tags=custom-display-mode1]
----

NOTE: The `dayCount` sets the exact number of days displayed in a custom display mode, regardless of <<weekendsVisible, weekendsVisible>> or <<hiddenDays, hiddenDays>> properties.

You can also use the `duration` element instead of the `dayCount` attribute to specify the date range:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/custom-display-mode-view.xml[tags=custom-display-mode2]
----

NOTE: When a date range is specified with a `duration`, hidden days will simply be omitted, and the display mode will stretch to fill the missing space.
However, if you specify `dayCount`, you are guaranteed to see a specific number of days.

For the programmatic way you should use the `CustomCalendarDisplayMode`.

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/displaymode/CustomDisplayModeView.java[tags=custom-display-mode3]
----

TIP: By default, the display mode type is the day-grid, but you can set another type using `GenericCalendarDisplayModes` enum.

[[display-mode-and-visible-range]]
=== Display Mode and Visible Range

Another option for configuring the date range in a display mode is to use the `visibleRange` property.
This property should be used in conjunction with the options from the `GenericCalendarDisplayModes` enum.

The `visibleRange` does not have an XML definition and can only be configured programmatically.

For instance, you can configure the calendar to show the day grid:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/displaymode/visible-range-view.xml[tags=visible-range1]
----

TIP: The `GenericCalendarDisplayModes` enum has the following options in XML: `DAY_GRID`, `TIME_GRID`, `LIST`, `MULTI_MONTH`.

And in the View controller set the required visible range:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/displaymode/VisibleRangeView.java[tags=visible-range2]
----

NOTE: The last date is exclusive.
For instance, if the visible range is from `2024-10-01` to `2024-10-03`, the component will show two days.

NOTE: When the component has a visible range, the navigation methods like `navigateToNext()` won't work.


[[calendar-event-editing]]
== Calendar Event editing

`FullCalendar` allows you to edit calendar events by changing the start date of an event (drag and drop) and by adjusting the event duration (resize). To handle calendar event changes, you should add the corresponding listeners: <<EventDropEvent, EventDropEvent>> and <<EventResizeEvent, EventResizeEvent>>.

The component can change only three properties of the <<calendar-event, CalendarEvent>> depending on the event changes:

- <<startDateTime, startDateTime>>
- <<endDateTime, endDateTime>>
- <<allDay, allDay>>

[[drag-and-drop]]
=== Drag and Drop

To enable drag and drop feature, you should set <<eventStartEditable, eventStartEditable>> property to `true`.

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/eventedit/event-edit-code-samples-view.xml[tags=event-edit-drag-and-drop1]
----

[[event-drop-event]]
==== Event Drop Event

To handle changes when a calendar event is dropped, subscribe to the <<EventDropEvent, EventDropEvent>>. The event is sent by the `FullCalendar` component when the user moves a calendar event to another position.

NOTE: Before proceeding with an event to the listeners, the component applies changes to the calendar event in the data provider.

The event contains the following information:

- The dropped calendar event
- The calendar event's data provider
- Old values
- Information about the current display mode
- The delta (duration) between the old start date and the new date
- Related calendar events that were also dropped with the dropped calendar event

The example below demonstrates how to immediately save changes to an entity calendar event:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/eventedit/EventDragAndDropView.java[tags=event-edit-drag-and-drop2]
----

[[resizable]]
=== Resizable

To enable calendar event resizing, set the <<eventDurationEditable, eventDurationEditable>> property to `true`. Then, `FullCalendar` will allow you changing the duration (size) of the calendar event by modifying its end date. To resize the calendar event by modifying its start date, you should enable the <<eventResizableFromStart, eventResizableFromStart>> property:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/eventedit/event-edit-code-samples-view.xml[tags=event-edit-resizable1]
----

[[event-resize-event]]
==== Event Resize Event

To handle changes when a calendar event is resized, subscribe to the <<EventResizeEvent, EventResizeEvent>>. This event is triggered by the `FullCalendar` component when the user resizes a calendar event.

NOTE: Before proceeding with an event to the listeners, the component applies changes to the calendar event in the data provider.

The event contains the following information:

- The resized calendar event
- The calendar event's data provider
- Old values
- Information about current display mode
- The start delta (duration) between old start date and new date
- The end delta (duration) between old end date and new date
- Related calendar events that were also resized with the dropped calendar event

The example below demonstrates how to immediately save changes to an entity calendar event:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/eventedit/EventResizeView.java[tags=event-edit-resizable2]
----

[[calendar-event-constraints]]
=== Calendar Event Constraints

The `FullCalendar` allows you to configure limitations for dragging and resizing events. There are three options to limit calendar event changes:

- Set an <<eventConstraintGroupId, eventConstraintGroupId>> value. If this property is set, events that are being dragged or resized must be fully contained by at least one of the events linked to the given group ID.
- Enable the default business hours using the <<eventConstraintBusinessHoursEnabled, eventConstraintBusinessHoursEnabled>> property. Events that are being dragged or resized must be fully contained within the week’s business hours. If <<defaultBusinessHoursEnabled, defaultBusinessHoursEnabled>> is set, the business hours are Monday to Friday, 9 AM to 5 PM. Custom business hours are also respected.
- Set custom business hours. As with the default business hours, events must be contained within the custom business hours.

[[event-overlap]]
=== Event Overlap

The <<eventOverlap, eventOverlap>> attribute is another type of limitation for dragging or resizing calendar events. This feature controls whether calendar events can overlap each other while being dragged or resized. By default, this property is enabled.

For more fine-grained control, you can use a JavaScript function definition to check whether an event can overlap another one.

The following example demonstrates how to allow all-day calendar events to overlap only with other all-day events:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/eventedit/EventOverlapView.java[tags=event-edit-event-overlap1]
----

NOTE: JavaScript function definition takes precedence over the <<eventOverlap, eventOverlap>> property.

TIP: All available properties of events can be found in the https://fullcalendar.io/docs/event-object[FullCalendar.js documentation].
In JavaScript function you can use <<additionalProperties, additionalProperties>> that are available under `extendedProps` object of an event. For instance, if a calendar event has additional property `myEventStatus`, you can retrieve its value as follows: `stillEvent.extendedProps.myEventStatus`.


[[selection]]
== Selection

The selection feature in `FullCalendar` allows users to select multiple days or time slots by clicking or dragging their mouse. To enable this feature set the <<selectionEnabled, selectionEnabled>> property to `true`:

[source,xml,indent=0]
----
include::example$fullcalendar-ex2/src/main/resources/com/company/fullcalendarsample/view/demos/selection/selection-code-samples-view.xml[tags=selection-basic1]
----

[[select-event]]
=== Select Event

To handle selection subscribe to the <<SelectEvent, SelectEvent>>.
This event is triggered by the `FullCalendar` component when the user selects multiple days or time slots.

The event contains the following information:

- The start date and time.
- The end date and time.
- The `allDay` property, which defines whether the selected dates are day cells or time slots.
- Information about the current display mode.
- Information about the mouse click.

The example of subscribing to select event:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/selection/SelectionSelectEventView.java[tags=selection-select-event1]
----

NOTE: The end date-time is exclusive.
For instance, if the selection is all-day and the last date value is `2024-10-15`, the value of this property will be equal to `2024-10-16`.

[[unselect-event]]
=== Unselect Event

To handle selection clearing, subscribe to the <<UnselectEvent, UnselectEvent>>. This event is triggered by the FullCalendar component when a selection is cleared. It is fired in the following cases:

- The user clicks away from the current selection. Note that this does not happen if the <<unselectAuto, unselectAuto>> property is disabled.
- The user makes a new selection. The event will be fired before the new selection occurs.
- The user moves forward or backward in the current calendar display mode or switches to another mode.
- The `unselect()` method is called.

The event contains the following information:

- Information about the current display mode.
- Information about the mouse click.

The example of subscribing to unselect event:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/selection/SelectionUnselectEventView.java[tags=selection-unselect-event1]
----

[[select-constraints]]
=== Select Constraints

The selection constraints are similar to <<calendar-event-constraints>>, but apply to a selection. This feature limits the selected area by the following options:

- The <<selectConstraintGroupId, selectConstraintGroupId>> property: if this property is set, only dates or time slots that contain events with the specified group ID can be selected.
- The <<selectConstraintBusinessHoursEnabled, selectConstraintBusinessHoursEnabled>> property: the selection can be performed within the week’s business hours. If <<defaultBusinessHoursEnabled, defaultBusinessHoursEnabled>> is set, the business hours are Monday to Friday, 9 AM to 5 PM. Custom business hours are also respected.
- Custom business hours: As with the default business hours, selections must be made within the custom business hours.

[[select-overlap]]
=== Select Overlap

The <<selectOverlap, selectOverlap>> attribute is another type of selection limitation. This feature controls whether the selection can overlap with calendar events. By default, this property is enabled.

For more fine-grained control, you can use a JavaScript function definition to check whether a selection can overlap with a calendar event

The following example demonstrates how to allow selection in cells that contain background calendar events

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/selection/SelectionSelectOverlapView.java[tags=selection-select-overlap1]
----

NOTE: JavaScript function definition takes precedence over the <<selectOverlap, selectOverlap>> property.

TIP: All available properties of events you can find in https://fullcalendar.io/docs/event-object[FullCalendar.js documentation].
In JavaScript function you can use <<additionalProperties, additionalProperties>> that are available under `extendedProps` object of an event.
For instance, if a calendar event has additional property `myEventStatus`, you can retrieve its value as follows: `event.extendedProps.myEventStatus`.

[[programmatic-selection-control]]
=== Programmatic selection control

To programmatically select or unselect date range, `FullCalendar` provides the following methods:

- `select()`
- `unselect()`

The following code selects a date range of two days, including the current day:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/selection/SelectionProgrammaticSelectionControlView.java[tags=selection-programmatic-selection-control1]
----

NOTE: The end date in the example above is excluded. It selects current and next days.

[[control-selection-by-a-javascript-function]]
==== Control selection by a JavaScript function

There is the ability to control selection over each cell using a JavaScript function. For instance, the following function enables selection for only three days: yesterday, today, and tomorrow:

[source,java,indent=0]
----
include::example$fullcalendar-ex2/src/main/java/com/company/fullcalendarsample/view/demos/selection/SelectionSelectAllowFunctionView.java[tags=selection-select-allow-function1]
----

<1> The `selectionInfo` parameters contain the following properties:

- `allDay`: A Boolean type that defines whether the selection is performed in all-day cells.
- `end`: A Date type representing the end date of the selection; this is an exclusive value.
- `endStr`: A String type representing the end date in string format.
- `start`: A Date type representing the start date of the selection.
- `startStr`: A String type representing the start date in string format.

<2> The `start` and `end` dates are applicable to the selection.

<3> This method converts `LocalDate` to ISO format with the component’s time zone.


== Business Hours

== ContextMenu

== Styling

== Localisation

== URL Query parameters

== Attributes

In Jmix there are many xref:flow-ui:vc/common-attributes.adoc[common attributes] that serve the same purpose for all components.
The following are attributes specific to `calendar`:

[cols="1h,7a,1",grid=rows,frame=none]
|===
|*Name*|*Description*|*Default*

|[[allDayMaintainDurationEnabled]]allDayMaintainDurationEnabled
| Determines how an event’s duration should be mutated when it is dragged from a timed section to an all-day section and vice versa.

- `true` - the duration will remain roughly the same before and after it is dragged to or from an all-day section. "Roughly" because if an event has a duration with hourly precision, it will be rounded down to the nearest whole-day.

- `false` - the event’s duration will be reset to <<defaultAllDayEventDuration, defaultAllDayEventDuration>> if it is being dropped in an all-day section or <<defaultTimedEventDuration, defaultTimedEventDuration>> if it is being dropped in a timed section

| `false`

|[[allDayText]]allDayText
| Sets the all-day text. The text is visible in time-grid display modes.
|

|[[closeHint]]closeHint
| Sets the hint for the close button in the popover when you click the "more" link.
|

|[[dateAlignment]]dateAlignment
| Sets the first visible date of <<custom-calendar-display-mode, CustomCalendarDisplayMode>>.

When a custom calendar display mode is being used, and you’d like to guarantee that the calendar begins at a certain interval, like the start-of-week or start-of-month, specify a value like `week` or `month`. If the property is not specified, a reasonable default will be generated based on the display mode’s duration.

If a display mode’s range is explicitly defined by visible date range, this property will be ignored.
|

|[[dayHeadersVisible]]dayHeadersVisible
| Sets whether the day headers should appear. It works for day-grid, time-grid and month display modes.
| `true`

|[[dayMaxEventRows]]dayMaxEventRows
| Sets rows count of events in day-grid display modes and in "all-day" section in time-grid display modes.

Note that "more" row is included to count. For instance, if the value is `1`, only the "more" row will be shown. Takes precedence over the <<defaultDayMaxEventRowsEnabled, defaultDayMaxEventRowsEnabled>>.
|

|[[dayMaxEvents]]dayMaxEvents
| Sets rows count of events in day-grid display modes and in "all-day" section in time-grid display modes.

Note that "+ more" row is not included to count. For instance, if the value is  `1`, one event and the "more" row will be shown. Takes precedence over the <<defaultDayMaxEventsEnabled, defaultDayMaxEventsEnabled>>.
|

|[[dayOfYear]]dayOfYear
| The rule how to define the first week of the year. For instance, if the first day of the week is `1` and the day of year equals to `4`, it means that the week that contains `Jan 4th` is the first week of the year.
|

|[[defaultAllDay]]defaultAllDay
| Sets the default value for each calendar event's <<allDay, allDay>> property when it is unspecified.

If the property is set to `true`, all events without <<allDay, allDay>> property (e.g. is not specified mapping in a data provider or calendar event returns `null` for this property) will be considered as all-day events.

Note, in this case, events without <<allDay, allDay>> property will be shown as all-day events. If such event will be changed by dragging or resizing, and you have listeners for these events, the component will apply changes to a calendar event, which can lead to modifying entity/ DTO instance.
| `false`

|[[defaultAllDayEventDuration]]defaultAllDayEventDuration
| Sets the default duration of all-day events if they don't specify <<endDateTime, endDateTime>> property.

For instance, the property is set to 2 days. The event that has <<allDay, allDay>> property equals to `true` and do not have <<endDateTime, endDateTime>> property, will be shown in all-day section and will occupy two days.

Note, calendar event's <<endDateTime, endDateTime>> property will remain unset, unless <<forceEventDuration, forceEventDuration>> has been set to `true`. In this case, the calendar will explicitly assign end date-time to an event. If such event will be changed by dragging or resizing, and you have listeners for these events, the component will set to calendar event end date-time value, which can lead to modifying entity/ DTO instance.

This property only affects events with <<allDay, allDay>> property equals to `true`.
| `P1d`

|[[defaultBusinessHoursEnabled]]defaultBusinessHoursEnabled
| Enables default business hours. The default business hour is: `monday - friday` from `9 AM` to `5 PM`.
| `false`

|[[defaultDayHeaderFormat]]defaultDayHeaderFormat
| Sets the format of the text that will be displayed on the calendar’s column headings.

By default, component sets localized format from `messages` when is created.
This property act as default format for all display modes and for <<custom-calendar-display-mode, CustomCalendarDisplayMode>> until specific property won't be set for these display modes. However, all display-mode properties objects by default explicitly specify the format, thus they override this property.

As component uses https://fullcalendar.io/docs/moment-plugin[moment plugin] for `FullCalendar`, you should follow the `moment.js` formatting rules: https://momentjs.com/docs/#/displaying/format/[Moment.js Documentation]. For instance, the `dd` produces the `Mo` value.

The property change is not applied after component attached to the UI.
|

|[[defaultDayMaxEventRowsEnabled]]defaultDayMaxEventRowsEnabled
| Limits the maximum number of stacked events within a given day.

- `true` - limits the number of events by height of the day cell.

- `false` - component displays all events as is.

This property is applied for day-grid display modes and in all-day cells.
| `false`

|[[defaultDayMaxEventsEnabled]]defaultDayMaxEventsEnabled
| Limits the maximum number of stacked events within a given day.

- `true` - limits the number of events by height of the day cell.

- `false` - component displays all events as is.

This property is applied for day-grid display modes and in all-day cells.
| `false`

|[[defaultDayPopoverFormat]]defaultDayPopoverFormat
| Sets the date format of title of the popover that is shown when "more" link is clicked. By default, component sets localized format from `messages` when is created.

This property act as default format for all display modes and for <<custom-calendar-display-mode, CustomCalendarDisplayMode>> until specific property won't be set for these display modes. However, all display-mode properties objects by default explicitly specify the format, thus they override this property.

As component uses https://fullcalendar.io/docs/moment-plugin[moment plugin] for `FullCalendar`, you should follow the `moment.js` formatting rules: https://momentjs.com/docs/#/displaying/format/[Moment.js Documentation]. For instance, the `MMM D, YY` produces the `Sep 9, 24` value.

The property change is not applied after component attached to the UI.
|

|[[defaultEventTimeFormat]]defaultEventTimeFormat
| Sets the format of the time-text that will be displayed on each event. By default, component sets localized format from `messages` when is created.

This property act as default format for all display modes and for <<custom-calendar-display-mode, CustomCalendarDisplayMode>> until specific property won't be set for these display modes. However, all display-mode properties objects by default explicitly specify the format, thus they override this property.

As component uses https://fullcalendar.io/docs/moment-plugin[moment plugin] for `FullCalendar`, you should follow the `moment.js` formatting rules: https://momentjs.com/docs/#/displaying/format/[Moment.js Documentation]. For instance, the `HH:mm` produces the `00:00` (01, 2, ... 23 : 01, 02 ... 59).

The property change is not applied after component attached to the UI.
|

|[[defaultSlotLabelFormat]]defaultSlotLabelFormat
| Sets the format of the text that will be displayed within a time slot. By default, component sets localized format from `messages` when is created.

This property act as default format for all display modes and for <<custom-calendar-display-mode, CustomCalendarDisplayMode>> until specific property won't be set for these display modes. However, all display-mode properties objects by default explicitly specify the format, thus they override this property.

As component uses https://fullcalendar.io/docs/moment-plugin[moment plugin] for `FullCalendar`, you should follow the `moment.js` formatting rules: https://momentjs.com/docs/#/displaying/format/[Moment.js Documentation]. For instance, the `ha` produces `1 am` (1, 2, ... 12 am/ pm).

The property change is not applied after component attached to the UI.
|

|[[defaultTimedEventDuration]]defaultTimedEventDuration
| Sets the default duration for timed events if they don't specify <<endDateTime, endDateTime>> property.

For instance, the property is set to 2 hours. The event that has <<allDay, allDay>>`  property equals to  `false` and do not have <<endDateTime, endDateTime>> property, will occupy two hours in time slots.

Note, calendar event's <<endDateTime, endDateTime>> property will remain unset, unless <<forceEventDuration, forceEventDuration>> has been set to `true`. In this case, the calendar will explicitly assign end date to an event. If such event will be changed by dragging or resizing, and you have listeners for these events, the component will set new value to calendar event's <<endDateTime, endDateTime>> property, which can lead to modifying entity/ DTO instance.

This property only affects events with `allDay` property equals to `false`.
| `PT1h`

|[[defaultWeekNumberFormat]]defaultWeekNumberFormat
| Sets the format of the week number that will be displayed when <<weekNumbersVisible, weekNumbersVisible>> is `true`. By default, component sets localized format from `messages` when is created.

This property act as default format for all display modes and for <<custom-calendar-display-mode, CustomCalendarDisplayMode>> until specific property won't be set for these display modes. However, all display-mode properties objects by default explicitly specify the format, thus they override this property.

As component uses https://fullcalendar.io/docs/moment-plugin[moment plugin] for `FullCalendar`, you should follow the `moment.js` formatting rules: https://momentjs.com/docs/#/displaying/format/[Moment.js Documentation]. For instance, the `[Week] w` produces the `Week 1` (1, 2, ... 52, 53).

The property change is not applied after component attached to the UI.
|

|[[displayEventTime]]displayEventTime
| Determines visibility of time text of each event.

The property applies to timed-events (not all-day). If set to `true`, time text will always be displayed on the event. If set to `false`, time text will never be displayed on the event. Events that are all-day will never display time text anyhow.
| `true`

|[[dragRevertDuration]]dragRevertDuration
| Sets the time it takes for an event to revert to its original position after an unsuccessful drag.
| `500`

|[[dragScroll]]dragScroll
| Enables to automatically scroll the scroll-containers during event drag-and-drop and date selecting.

The property change is not applied after component attached to the UI.
| `true`

|[[eventBackgroundColor]]eventBackgroundColor
| Sets the background color for all events on the calendar.

Note, calendar events can override this value if they specify <<backgroundColor, backgroundColor>> property.

Supported values are:

- `#f00`

- `#ff0000`

- `rgb(255,0,0)`

- Color name - `red`
|

|[[eventBorderColor]]eventBorderColor
| Sets the border color for all events on the calendar.

Note, calendar events can override this value if they specify <<borderColor, borderColor>> property.

Supported values are:

- `#f00`

- `#ff0000`

- `rgb(255,0,0)`

- Color name - `red`
|

|[[eventConstraintBusinessHoursEnabled]]eventConstraintBusinessHoursEnabled
| Sets whether events being dragged or resized must be fully contained within the week’s business hours. It also respects custom business hours.
| `false`

|[[eventConstraintGroupId]]eventConstraintGroupId
| Sets a group ID to limit the dragging and resizing of events. Events that are being dragged or resized must be fully contained by at least one of the events linked to by the given group ID.

Takes precedence over <<eventConstraintBusinessHoursEnabled, eventConstraintBusinessHoursEnabled>>.

The group ID can be an entity instance, string, enum or other types.
|

|[[eventDisplay]]eventDisplay
| Sets the display mode that controls the appearance of all events that do not specify display mode.

To control the display of specific events, use the <<display, display>> property of calendar event.
| `AUTO`

|[[eventDragMinDistance]]eventDragMinDistance
| Sets how many pixels the user’s mouse/touch must move before an event drag activates.
| `5`

|[[eventDurationEditable]]eventDurationEditable
| Enables to edit event duration using resizing. This property can be overridden on per-event by <<durationEditable, durationEditable>> property.
| `false`

|[[eventHint]]eventHint
| Sets for list display modes' non-visible table header the name of the column with event names.
|

|[[eventInteractive]]eventInteractive
| Enables to edit event duration using resizing

This property can be overridden on per-event by <<interactive, interactive>> property.
| `false`

|[[eventLongPressDelay]]eventLongPressDelay
| Sets the amount of time, in milliseconds, that the user must hold down before an event becomes draggable on touch devices.
| `1000`

|[[eventMaxStack]]eventMaxStack
| Sets the maximum number of events that stack top-to-bottom for time-grid display modes.
|

|[[eventOrder]]eventOrder
| Sets the list of calendar event properties that should participate in sorting. It is also available to specify properties from event's <<additionalProperties, additionalProperties>> property.

For most calendar display modes, this property determines the vertical ordering of events within the same day. For time-grid display modes however, it determines the horizontal ordering of events within the same time slot.

The default value puts earlier events first. If tied, it puts longer events first. If still tied, it puts all-day events first. If still tied, orders events by title, alphabetically.

If putting a lower-precedent event before a higher-precedent improves compactness, the algorithm will do so. To disable this behavior, set <<eventOrderStrict, eventOrderStrict>> to `true`.

The provided properties are sorted in ascending order. If a property is prefixed with a minus sign like `-title`, sorting will be in descending order.
| `start,-duration,allDay,title`

|[[eventOrderStrict]]eventOrderStrict
| Enables the component to strictly follow the specified event order.

The `false` value, meaning the event order is not strict and compactness will be prioritized over following event order exactly.
| `false`

|[[eventOverlap]]eventOverlap
| Allows events to overlap each other during dragging and resizing.
| `true`

|[[eventResizableFromStart]]eventResizableFromStart
| Enables to resize an event from its starting date.
| `false`

|[[eventStartEditable]]eventStartEditable
| Enables to edit event start time using dragging.

This property can be overridden on per-event by <<startEditable, startEditable>> property.
| `false`

|[[eventTextColor]]eventTextColor
| Sets the text color for all events on the calendar.

Note, calendar events can override this value if they specify <<textColor, textColor>> property.

Supported values are:

- `#f00`

- `#ff0000`

- `rgb(255,0,0)`

- Color name - `red`

The color applies in time-grid display modes and for all-day events in day-grid display modes.
|

|[[expandRows]]expandRows
| Enables to expand rows of time-grid display modes if they don’t take up the entire height.
| `false`

|[[firstDayOfWeek]]firstDayOfWeek
| Sets the day that each week begins. The default value is taken from locale.
|

|[[forceEventDuration]]forceEventDuration
| Makes the component to assign <<endDateTime, endDateTime>> property value to events if they do not have it.

Note, if event does not specify <<endDateTime, endDateTime>> property, the component will set it explicitly. If such event will be changed by dragging or resizing, and you have listeners for these events, the component will set new value to calendar event <<endDateTime, endDateTime>> property, which can lead to modifying entity/ DTO instance.
| `false`

|[[initialDate]]initialDate
| Sets the initial date that will be displayed when the component is attached to UI. If not specified, the current date will be used.

The property change is not applied after component attached to the UI.
|

|[[initialDisplayMode]]initialDisplayMode
| Sets initial calendar display mode that will be shown after attaching component to th UI.

The property change is not applied after component attached to the UI.
| `DAY_GRID_MONTH`

|[[moreLinkClassNames]]moreLinkClassNames
| Sets CSS class names that should be added to "more" link.
|

|[[moreLinkDisplayMode]]moreLinkDisplayMode
| Sets the calendar display mode that should be shown when "more" link is clicked.
|

|[[moreLinkHint]]moreLinkHint
| Sets the "more" link hint. The provided text can be a https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals[JavaScript Template string]. This template takes the count parameter that has Number type, for instance:

[source,java]
----
setMoreLinkHint("Show ${count} more event${count === 1 ? '' : 's'}");
----

It also takes a string definition of JavaScript function that takes count as a parameter. For instance:

[source,java]
----
setMoreLinkHint("function (count) { return `Show ${count} more event${count === 1 ? '' : 's'}`; }");
----
|

|[[moreLinkText]]moreLinkText
| Sets the "more" link text. The provided text can be a https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals[JavaScript Template string].. This template takes the `count` parameter, for instance:

[source,java]
----
setMoreLinkText("+${count} event(s)");
----

It also takes a string definition of JavaScript function that takes the `count` as a parameter. For instance:

[source,java]
----
setMoreLinkText("function (count) { return `See +${count} event` + (count === 1 ? '' : 's'); }");
----
|

|[[navLinkHint]]navLinkHint
| Sets the hint text of navigation links. The provided text can be a https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals[JavaScript Template string]. This template takes the date parameter that has String type, for instance:

[source,java]
----
setNavLinkHint("Navigate to ${date}");
----

It also takes a string definition of JavaScript function that takes the `date` as a parameter with the String type. For instance:

[source,java]
----
setNavLinkHint("function (date) { return `Navigate to ${date}`; }");
----
|

|[[navigationLinksEnabled]]navigationLinksEnabled
| Enables navigation to date using day names and week names.
| `false`

|[[nextDayThreshold]]nextDayThreshold
| Sets the minimum time that event's <<endDateTime, endDateTime>> property should achieve to render event as it if were on that day.

For instance, the property is set to `09:00:00`. And there is an event with dates:

- start - `2024-09-01T20:00:00`;
- end - `2024-09-02T02:00:00`;

So, the event spans to another day, but it will be rendered as a one-day event, because the `nextDayThreshold` property is specified. However, If the event has end date - `2024-09-02T10:00:00`, it will be rendered as two-day event.

Only affects timed events that appear on whole-days cells. Whole-day cells occur in day-grid display modes and the all-day slots in the time-grid display modes.

Note that this property is ignored when event's <<allDay, allDay>> property is set to `true`.
|

|[[noEventsText]]noEventsText
| Sets text that will be shown when no events are displayed in list display modes
|

|[[nowIndicatorVisible]]progressiveEventRendering
| Enables displaying a marker indicating the current time. The property applies in time-grid display modes.

The property change is not applied after component attached to the UI.
| `false`

|[[progressiveEventRendering]]progressiveEventRendering
| Enables rendering of events from the data provider as soon as the events are loaded.

- `true` - renders each data provider as it is received. Will result in more renders.

- `false` - waits until all data providers have received their data and then renders everything at once, resulting in fewer renders.
| `false`

|[[scrollTime]]scrollTime
| Sets the initial scroll position to a specific time. Users will be able to scroll back to see events before this time. If you want to prevent users from doing this, use the <<slotMinTime, slotMinTime>> instead.

By default, the scroll time is reapplied to the calendar whenever the date range changes. To disable this, set <<scrollTimeReset, scrollTimeReset>> to `false`.

The property change is not applied after component attached to the UI.
| `PT6h`

|[[scrollTimeReset]]scrollTimeReset
| Sets whether the calendar should scroll to <<scrollTime, scrollTime>> every time the date range changes.

By default, whenever the date range changes, either via calendar methods or user actions, the scroll is reset. To disable this behavior, set the property to `false`.
| `true`

|[[selectConstraintBusinessHoursEnabled]]selectConstraintBusinessHoursEnabled
| Sets whether the selection must be fully contained within the week’s business hours.
It also respects custom business hours.

This property will be applied if <<selectionEnabled, selectionEnabled>> is enabled.
| `false`

|[[selectConstraintGroupId]]selectConstraintGroupId
| Sets a group ID to limit selection. If group ID is set, only cells with events that contain the same group ID can be selected.
Takes precedence over the <<selectConstraintBusinessHoursEnabled, selectConstraintBusinessHoursEnabled>>.

This property will be applied if <<selectionEnabled, selectionEnabled>> is enabled.
|

|[[selectLongPressDelay]]selectLongPressDelay
| Sets the amount of time the user must hold down before a date becomes selectable on touch devices.
| `1000`

|[[selectMinDistance]]selectMinDistance
| Sets the minimum distance the user’s mouse must travel after a mousedown, before a selection is allowed. A non-zero value is useful for differentiating a selection from a date click event.

This property is only applicable to mouse-related interaction. For touch interaction, see <<selectLongPressDelay, selectLongPressDelay>>.

The property change is not applied after component attached to the UI.
| `0`

|[[selectMirror]]selectMirror
| Enables the drawing of a placeholder event while the user is dragging. This property applies to time-grid display modes.
| `false`

|[[selectOverlap]]selectOverlap
| Enables to select cells that contains events.
| `true`

|[[selectionEnabled]]selectionEnabled
| Allows the user to highlight multiple days or timeslots by clicking and dragging.
| `false`

|[[slotDuration]]slotDuration
| Sets the interval at which time slots are displayed.

In XML component definition, the attribute value should follow the ISO-8601 duration format, which is used by the `java.time.Duration` class.
| `PT30m`

|[[slotLabelInterval]]slotLabelInterval
| Sets the frequency for labeling time slots with text. If not specified, a reasonable value will be automatically computed based on <<slotDuration, slotDuration>>.

When specifying this property, give the `1 hour` value, this will cause the header labels to appear on the hour marks, even if the <<slotDuration, slotDuration>> was hypothetically `15` or `30` minutes long.

In XML component definition, the attribute value should follow the ISO-8601 duration format, which is used by the `java.time.Duration` class.
|

|[[slotMaxTime]]slotMaxTime
| Sets the last time slot that will be displayed for each day. The specified value represents the exclusive end time, meaning the time slot ending at this value will not be included. The property determines the last slot, even when the scrollbars have been scrolled all the way back.

In XML component definition, the attribute value should follow the ISO-8601 duration format, which is used by the `java.time.Duration` class.
| `PT24h`

|[[slotMinTime]]slotMinTime
| Sets the first time slot that will be displayed for each day. The property determines the first time slot, even when the scrollbars have been scrolled all the way back.

In XML component definition, the attribute value should follow the ISO-8601 duration format, which is used by the `java.time.Duration` class.
| `PT0h`

|[[snapDuration]]snapDuration
| Sets a value that determines the time interval at which a dragged event will snap to the time axis. This also affects the granularity at which selections can be made.

In XML component definition, the attribute value should follow the ISO-8601 duration format, which is used by the `java.time.Duration` class.
| `PT30m`

|[[timeHint]]timeHint
| Sets for list display modes' non-visible table header the name of the column with days and times
|

|[[unselectAuto]]unselectAuto
| Sets whether clicking elsewhere on the page will clear the current selection. Works only if <<selectionEnabled, selectionEnabled>> is `true`.

The property change is not applied after component attached to the UI.
| `true`

|[[unselectCancelSelector]]unselectCancelSelector
| Sets the CSS selector that will ignore the <<unselectAuto, unselectAuto>> property. For instance:

`vaadin-form-layout .custom-text-input`

The property change is not applied after component attached to the UI.
|

|[[weekNumbersVisible]]weekNumbersVisible
| Sets whether week numbers should be displayed on the calendar.
| `false`

|[[weekTextLong]]weekTextLong
| The long name of the week.
|

|[[weekendsVisible]]weekendsVisible
| Sets whether to include Saturday and Sunday columns in any of the calendar display modes.
| `true`

|[[windowResizeDelay]]windowResizeDelay
| Sets the delay, in milliseconds, that the calendar will wait before adjusting its size after a window resize occurs.
| `100`

|===

== Handlers

In Jmix there are many xref:flow-ui:vc/common-handlers.adoc[common handlers] that are configured in the same way for all components.
The following are handlers specific to `calendar`:

include::flow-ui:vc/handler-generation-tip.adoc[]

[cols="1h,6a",grid=rows,frame=none]
|===
|*Name*|*Description*

|[[DateClickEvent]]DateClickEvent
| `io.jmix.fullcalendarflowui.component.event.DateClickEvent` fired when a day cell or time cell is clicked.

|[[DatesSetEvent]]DatesSetEvent
| `io.jmix.fullcalendarflowui.component.event.DatesSetEvent` fired after the calendar’s date range has been initially set or changed in some way and the DOM of component has been updated.

The calendar’s dates can change any time the user does the following:

- navigates to next and previous;
- switches the display mode;
- clicks a navigation link (e.g.week or day if <<navigationLinksEnabled, navigationLinksEnabled>> is `true`.

The dates can also change when the current-date is manipulated via the API.

|[[DayNavigationLinkClickEvent]]DayNavigationLinkClickEvent
| `io.jmix.fullcalendarflowui.component.event.DayNavigationLinkClickEvent`  fired when the user clicks on day heading navigation link. The navigation link can be activated by the <<navigationLinksEnabled, navigationLinksEnabled>> property.

|[[EventClickEvent]]EventClickEvent
| `io.jmix.fullcalendarflowui.component.event.EventClickEvent` fired when the calendar event is clicked.

|[[EventDropEvent]]EventDropEvent
| `io.jmix.fullcalendarflowui.component.event.EventDropEvent` fired when the dragging stops and the event has been moved to a different day or time slot.

|[[EventMouseEnterEvent]]EventMouseEnterEvent
| `io.jmix.fullcalendarflowui.component.event.EventMouseEnterEvent` fired when the user mouses over a calendar event.

|[[EventMouseLeaveEvent]]EventMouseLeaveEvent
| `io.jmix.fullcalendarflowui.component.event.EventMouseLeaveEvent` fired when the user mouses out of a calendar event.

|[[EventResizeEvent]]EventResizeEvent
| `io.jmix.fullcalendarflowui.component.event.EventResizeEvent` fired when the resizing stops and the calendar event's duration has changed.

|[[MoreLinkClickEvent]]MoreLinkClickEvent
| `io.jmix.fullcalendarflowui.component.event.MoreLinkClickEvent` fired when the user clicks on "more" link. The "more" link can be activated by the following properties:

- <<defaultDayMaxEventRowsEnabled, defaultDayMaxEventRowsEnabled>>
- <<dayMaxEventRows, dayMaxEventRows>>
- <<defaultDayMaxEventsEnabled, defaultDayMaxEventsEnabled>>
- <<dayMaxEvents, dayMaxEvents>>

|[[SelectEvent]]SelectEvent
| `io.jmix.fullcalendarflowui.component.event.SelectEvent` fired when a date/time selection is made.

Selection mode can be enabled by <<selectionEnabled, selectionEnabled>> property.

|[[UnselectEvent]]UnselectEvent
| `io.jmix.fullcalendarflowui.component.event.UnselectEvent` fired when the current selection is cleared. A selection might be cleared for a number of reasons:

- The user clicks away from the current selection (doesn’t happen when <<unselectAuto, unselectAuto>> is disabled).
- The user makes a new selection. The unselect event will be fired before the new selection occurs.
- The user moves forward or backward in the current calendar's display mode, or switches to another mode.
- The `unselect()` method is called.

|[[WeekNavigationLinkClickEvent]]WeekNavigationLinkClickEvent
| `io.jmix.fullcalendarflowui.component.event.WeekNavigationLinkClickEvent` fired when the user clicks on the week number navigation link.

The navigation link can be activated by the <<navigationLinksEnabled, navigationLinksEnabled>> property.

|[[dayCellBottomTextClassNamesGenerator]]dayCellBottomTextClassNamesGenerator
| Generates CSS class names for day cell's bottom text.

Note, the generator will be invoked only if cell's bottom text is not null.

|[[dayCellBottomTextGenerator]]dayCellBottomTextGenerator
| Generates the bottom text for day cells. It applies only for day-grid month and year and display modes.

Note that in some cases, events in a cell can overlap the text at the bottom. To avoid this, it is recommended to limit the visible number of events. For instance, you can use the <<dayMaxEvents, dayMaxEvents>> property.

|[[dayCellClassNamesGenerator]]dayCellClassNamesGenerator
| Generates CSS class names for day cells. The day cell appears in day-grid and time-grid display modes as an all-day cell.

|[[dayHeaderClassNamesGenerator]]dayHeaderClassNamesGenerator
| Generates CSS class names for day headers. The day header is a cell that shows day of week and date in some display modes.

|[[moreLinkClassNamesGenerator]]moreLinkClassNamesGenerator
| Generates CSS class names for "more" link.

The generator takes precedence over other methods that set CSS class names.

|[[nowIndicatorClassNamesGenerator]]nowIndicatorClassNamesGenerator
| Generates CSS class names for a now-indicator. The now-indicator consists of two parts: the line and the axis.

The now-indicator can be enabled by <<nowIndicatorVisible, nowIndicatorVisible>> property.

|[[slotLabelClassNamesGenerator]]slotLabelClassNamesGenerator
| Generates CSS class names for the slot label, which appears as a cell with a time label in time-grid display modes.

|===

== Elements

Elements of `calendar` provide a wide range of options to control the appearance, behavior, formatting, data binding and other functionality.

[TIP]
====
To add an element to a selected component click the xref:studio:screen-designer.adoc#component-inspector[Add] button in the *Jmix UI* inspector panel.
====

[[display-mode-properties]]
=== Display Mode Properties

The `displayModeProperties` is a group element that contains all predefined display mode elements to configure their properties.

[cols="1h,6",grid=none]
|===

|XML Element
|`displayModeProperties`

|Elements
|<<dayGridDay, dayGridDay>> -
<<dayGridWeek, dayGridWeek>> -
<<dayGridMonth, dayGridMonth>> -
<<dayGridYear, dayGridYear>> -
<<timeGridDay, timeGridDay>> -
<<timeGridWeek, timeGridWeek>> -
<<listDay, listDay>> -
<<listWeek, listWeek>> -
<<listMonth, listMonth>> -
<<listYear, listYear>> -
<<multiMonthYear, multiMonthYear>> -

|===

[[custom-display-mode]]
=== Custom Display Modes

The `customDisplayModes` is a group element that contains definitions of custom display modes that the component can use.

[cols="1h,6",grid=none]
|===

|XML Element
|`customDisplayModes`

|Elements
|<<displayMode, displayMode>>

|===

==== displayMode

== See Also

See the https://fullcalendar.io/docs[FullCalendar Docs^] for more information.